
# TODO
# ====
[+] - проверка базовых API аутентификации (регистрация+, вход+, забыли пароль(ссылка на почту)+, сброс пароля(новый пароль)+,
, инфа о пользователе+,+ подтверждение email отправка на почту   )
#[] - добавить токен доступа для при входе и регистрации в систему ?! еще раз посмотреть реализацию в видео
# нет работать будем с помощью сесии , токен возможно только для фронта сделать и все (хотя можно и в базу занести, но первым делом он смотрит на сесиию)
# параметры могут быть изменены и так как мы не записываем значение csfr токена на сервере а только на бэке, то при его модификации,
# мы не сможем сказать правильный ли токен или нет и не сможем обработать миделвэёр на фронтенде.
[+] - создать роуты для редактирвоания данных аккаунта (например, пароля)! (посмотрел какие функции реализованы)

    [+]- редактирвоание имени и почты
    [+]- редактирвоание пароля
    [+]- удаление аккаунта

[+]-подключение двухфакторной аутентификации
    [+] - при входе через fortify 2fa работает
    [+] - понять как что возращается при входе через fortify, так как возращаются только коды без каких-либо данных
        !!!Решено: чтобы кастомизировать ответы, можно сделать свой кастомнобый бинд ответа от сервера. Сделал на примере выхода.
                    Делать кастомизацию других используемых маршутов Fortify не вижу смысла, так как все нужные данные выводятся (коды, статусы и т.д.)
[+] - изучить странную ситуацию с вхожом на фронте и выходом (связано с миделвейром).  так входиться через fortify а выход чере санктум не работает
       !!! Решено: проблема была со sanctum, а именно со stateful, т.е. указать какой домен нужно использовать для отслеживания сесий
       !!! Решено: при загрузке страницы входа, нужно отправить запрос на получение csfr-токена и дальше использовать его при первом запросе.
                    или отправлять запрос внутри функции (смтр фото) + возможно влияет асинхронность (async, await)
[+] - убрать префикс api  (находился в broadcast/app)
[+] - создать миграцию, модель и аконтролер для будущего апи учетных записей.
[+] -удалить ненужные реквесты для учетных записей (account) в app/HTTP/..., так как валидация будет иди в запросах
[+] - создать поля в миграции и связать с другими моделями( таблоицами)
[+] - посмотреть может добавить поля в модели для обязательного заполнения и т.д.
       !!! Решено: таких полей нет. При условии что логин может быть уникальным,
                  то это не сработает для всех пользователй, поэтому валидация должна проводиться при заполнени
[+] - отправка на почту ссылку для подтверждения после регистрации
[+] - подтверждение почты ( тест на фронте)
        [+] - добавление проверки ссылки на подтвердление (16.05 ) - т.е. добавлена проверка на параматер id ( пользователя) при подтверждении
[+] - восстановление пароля (тест на фронте)
[+] - изменение данных данных пользователя
    [+] - изменение имени
    [+] - создатть таблицу для подтверждения кодов
    [+] - изменение почты при условии если она не верефицированна
    [+] - отправка кодов на почту ( и на верифицированную и на старую)
          !!!  [] - возможно как то оптимизирвать отправку
            ( например, если повторно отправлять, то перезаписывать коды и оставлять только activate или в дальнейем удалять если нет необходимости)
           ! есть метод CreateOrUpdate
    [+] - првоерка кодов и подтверждение
!!![+] - нужно определить и разработать алгоритм, с помощью какого параметра в сесии можно увидеть каую-либо учетную запись
    Выбран механизм сессий
[+] - работа с учетными записями (!!! для конретного аутентифицированного пользователя)
    # [+] - измение патерна регистрации с мастером пароля - неактуально
    [+] - upd: создание матер пароля (разрешить создавать мастер пароль после регистарции и подверждения почты)
    [+] - редактирвоание мастер пароля
    [+] - восстановление мастера пароля только при подтвержденной почте !!!!
        [+] - создать миграцию
        [+] - создали модель
        [+] - создать функцию генерации ссылки
        [+] - создание функции проверки токена восстанволение пароля
    [+] - добавление учетной записей
    [+] - вывод категорий учетных записей
    [+] - удаление выбранной учетной записей данного пользователя
    [+] - редактирование выбранной учетной записей данного пользователя
    [+] - просмотр выбранной учетной записи данного пользователя
    [+] - просмотр всех учетных записей для авторизированного пользователя
    [] - подвердить с помощью выбранного алгоритма просмотра учетных записей
    [+] - если мастер пароль (то его редактирвоание, и запрет на создание новых учетных записей если его нет, то запрет)
           !!! upd: очень важная вещь, оказалась делал записи без него.
[+] - изменить систему сброса мастер если включена 2fa
[+] - изменить выключение 2fa ?
[+] - проверить параметры котрыйе пердеются в запросе вида {id} - добавлены что это цифры

!ВАЖНОЕ ПРИМЕЧАНИЕ: для того чтобы восстановить мастер пароль, нужна почта. Сейчас наколько я понимаю
можно менять без подтверждения, например кода подтверждения и т.д. То есть можно просто напросто взломать
систему без подтверждения. Поэтому чтобы делать операции например с учетными записями, нужна подтвержденная почта.
При этом если менять емеил то нужен код подтверждения, а если емил не подтвержден при изменении пароля, то не ребывать код.
Если почта не подтверждена, то запрет на создание (?!и просмотр учетных записей будет недоступен)

![+] - проверить двухфакторную аутентификацию в виде переменной сесии - т.е получить значение) возможно даже изменить алгоритм аутентификации
        !!! Решено: для пользователя доступен метод hasEnabledTwoFactorAuthentication(), // он который проверяет наличие включения 2FA
        [+] - изменить восстановление мастер пароля если доступна 2fa
        [+] - изменить восстанволение пароля при двух факторке (например если достпуна 2fa а он позволяет  звходить ?)
!!! [+] - провериь casts по умолчанию на hash и аккантуы на encrypt - например токены масстер пароля и т.д.
        [+] - В контролёре ProfileController удалены лишние Hash:make если атрибуты в модели тоже равны hash
        [+] - В контролере MasterpasswordController удалены лишниее Hash:make
        [+] - В контролёре AccoutsController удалены лишние Hash:make
        [+] - В контролере NewPasswordController удалены лишние Hash:make
        [+] - В контролёре PasswordController удалены лишние Hash:make
!!![+] - проработать отношение моделей для основных таблиц: юзеры + коды, юзеры +токены мастер пароля, юзеры + аккаунты
[+] -посмотреть на формление маршутов (ссылок на роуты) //оставлю так
[+]  - в ошибках возвращать error вместо message
[+] - разобраться с разметкой письма (опубликовал вид письма в resource и испарвил разметку)
[+] - разобраться с требыванием к паролю ( например, требывать пароля с буквами, знаками как и для обычного так и для мастера) или чтобы не совпадал с дургими учетными данными
[+] - разобраться в методах запросов ( согласно rest API )
и ответов от сервера и если что подкорректировать их, например ответы на английском языке
get - получение, post- отправка, put - обновление, patch- частичное обновление, delete - удаление
Конечное форматирвоание на русский будет при проектирвоании клиента
[+] - разобраться с кодами ответов в контролерах (например созданный ресур и уже имещийся и т.д.)
    401 - не авторизован, 422 неправильные данные, 403-запрещено, 404 - не найдено, 500 - ошибка сервера, 419 - csfr токен устарел
    200 - ок , 201 - создано, 204 - no content

при завершении финальной  работы или публикации на хостинге:
[] - возможно настроить планировщик задач на удаление токенов для воостановления мастер пароля и кодов
+ посмотреть время работы ссылок, кодов (для отключения 2fa, токенов пароля, токенов восстановления пароля)
[] - подключить Redis
php artisan:make queue:work - очередь , можно включить в гипервизоре (редис тот же самый)
Для фронта:
[+] - разобраться с подтверждением почты почему какаято-ссылка ведет
[] - разрешение куки в браузере для фронта
[] - генерация пароля
[] - поиск учётной
